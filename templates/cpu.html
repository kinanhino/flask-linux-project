{% extends "base.html" %}
{% block head %}
CPU Monitoring
{% endblock %}
{% block content %}
<div class="row">
    <h2>CPU Usage</h2>
            <!--------CPU------------->
            <div class="col main pt-5 mt-3">

            <p class="lead d-none d-sm-block">CPU live data:</p>


            <div class="row mb-3">
                <div class="col-xl-3 col-sm-6 py-2">
                    <div class="card bg-success text-white h-100">
                        <div class="card-body bg-success">
                            <div class="rotate">
                                <i class="fa fa-user fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase">us</h6>
                            <h1 class="display-4">{{cpu['us']}}</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 py-2">
                    <div class="card text-white bg-danger h-100">
                        <div class="card-body bg-danger">
                            <div class="rotate">
                                <i class="fa fa-list fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase">sy</h6>
                            <h1 class="display-4">{{cpu['sy']}}</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 py-2">
                    <div class="card text-white bg-info h-100">
                        <div class="card-body bg-info">
                            <div class="rotate">
                                <i class="fa fa-twitter fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase">ni</h6>
                            <h1 class="display-4">{{cpu['ni']}}</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 py-2">
                    <div class="card text-white bg-warning h-100">
                        <div class="card-body">
                            <div class="rotate">
                                <i class="fa fa-share fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase">id</h6>
                            <h1 class="display-4">{{cpu['id']}}</h1>
                        </div>
                    </div>
                </div>
            </div>
            <!--/row-->
            <div class="row mb-3">
                <div class="col-xl-3 col-sm-6 py-2">
                    <div class="card bg-success text-white h-100">
                        <div class="card-body bg-success">
                            <div class="rotate">
                                <i class="fa fa-user fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase">wa</h6>
                            <h1 class="display-4">{{cpu['wa']}}</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 py-2">
                    <div class="card text-white bg-danger h-100">
                        <div class="card-body bg-danger">
                            <div class="rotate">
                                <i class="fa fa-list fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase">hi</h6>
                            <h1 class="display-4">{{cpu['hi']}}</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 py-2">
                    <div class="card text-white bg-info h-100">
                        <div class="card-body bg-info">
                            <div class="rotate">
                                <i class="fa fa-twitter fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase">si</h6>
                            <h1 class="display-4">{{cpu['si']}}</h1>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 py-2">
                    <div class="card text-white bg-warning h-100">
                        <div class="card-body">
                            <div class="rotate">
                                <i class="fa fa-share fa-4x"></i>
                            </div>
                            <h6 class="text-uppercase">st</h6>
                            <h1 class="display-4">{{cpu['st']}}</h1>
                        </div>
                    </div>
                </div>
            </div>
            <!--/row-->
<!-- CPU graf -->


<div class="chart-container">
    <canvas id="myChart2"></canvas>
  </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="script.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  // Sample data for the chart
  var data = {
    labels: [
      {% for entry in all_cpu %}
        "{{ entry.dt }}",
      {% endfor %}
    ],
    datasets: [{
      label: "CPU usage",
      data: [
        {% for entry in all_cpu %}
          {{ entry.us }},
        {% endfor %}
      ],
      fill: false,
      borderColor: "rgb(75, 192, 192)",
      tension: 0.1
    }]
};

  // Get the canvas element
  var ctx = document.getElementById("myChart2").getContext("2d");

  // Create the chart
  var myChart = new Chart(ctx, {
    type: "line",
    data: data
  });
});
</script>




<!-- end CPU graf -->
</div>
{% endblock %}
